
var content = {
    "Month":[5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4],

    "Date":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],

    "Year":[2009,2009,2009,2009,2009,2009,2009,2009,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2011,2011,2011,2011,2011,2011,2011,2011,2011,2011,2011,2011,2012,2012,2012,2012,2012,2012,2012,2012,2012,2012,2012,2012,2013,2013,2013,2013,2013,2013,2013,2013,2013,2013,2013,2013,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2016,2016,2016,2016,2016,2016,2016,2016,2016,2016,2016,2016,2017,2017,2017,2017,2017,2017,2017,2017,2017,2017,2017,2017,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2019,2019,2019,2019],

    "Nintendo":[30.16662,28.98516,29.36148,27.62867,27.89788,27.33832,26.48566,30.99764,30.08281,36.9929,38.25114,33.27576,34.02435,32.14374,31.72379,28.48295,29.5249,31.31567,33.36359,31.31567,33.65746,30.98506,27.76353,26.93407,21.71502,18.5929,20.48481,16.91534,17.61433,17.75412,15.78765,15.78765,17.25086,17.67024,15.74695,13.48662,13.67498,12.99689,13.11932,14.94642,15.21012,14.22123,12.5354,11.45233,11.35815,12.65784,12.9498,11.74429,13.81626,14.88049,13.27001,13.29826,13.19467,15.1442,15.70928,13.77858,14.50377,14.02345,12.42565,13.83161,14.2021,13.13813,13.19513,12.91013,12.98613,13.77461,12.30215,11.43768,12.67264,17.508,20.17929,20.29438,20.12175,21.10961,24.57193,20.11216,19.421,18.37408,16.57797,16.87572,16.70283,17.04861,16.51488,17.75398,17.21187,24.95624,26.40832,31.92618,29.12853,29.84488,25.12081,23.9398,25.2757,28.09272,31.15787,37.20651,41.13074,41.76019,40.94388,45.19268,47.9769,50.27467,44.44643,56.29027,56.26069,54.74199,52.26562,50.83151,40.62338,42.49569,44.76638,45.28426,39.13,37.87,33.1,37.24,34.25,35.87,43.46],

    "Electronic":[21.72,21.47,18.22,19.05,18.24,16.89,17.75,16.28,16.58,18.66,19.37,16.51,14.4,15.93,15.23,16.45,15.83,14.91,16.38,15.59,18.8,19.53,20.18,24.41,23.6,22.25,22.58,20.45,23.35,23.19,20.6,18.58,16.34,16.49,15.38,13.62,12.35,11.02,13.33,12.69,12.35,14.81,14.52,15.73,17.53,17.7,17.61,22.99,22.99,26.12,26.64,25.55,26.25,22.17,22.94,26.4,28.59,29.01,28.3,35.13,35.87,33.6,37.84,35.61,40.97,43.93,47.02,54.86,57.18,58.82,58.09,62.76,66.5,71.55,67.16,67.75,72.07,67.79,68.72,64.55,64.24,66.11,61.85,76.75,75.76,76.32,81.23,85.4,78.52,79.24,78.76,83.43,86.5,89.52,94.82,113.33,105.72,116.74,121.5,118.06,119.6,106.35,105.06,126.96,123.7,121.24,117.98,130.91,141.02,128.75,113.41,120.49,90.98,84.07,78.91,92.24,95.78,101.63,93.14],
   
    "Activision":[11.39296,10.32853,10.47286,11.17647,9.769259,10.27441,10.02183,9.164882,9.588848,11.01799,10.13107,9.829328,9.591594,10.86255,9.765323,9.893333,10.47852,10.73454,11.37459,10.32308,10.16764,10.03049,10.5631,11.12931,10.84157,10.99008,10.99936,11.04577,12.42882,11.52845,11.43563,11.45419,11.09218,11.89973,12.128,11.05456,11.28996,11.32763,11.07339,10.62141,10.25419,10.79091,9.99995,10.73441,13.46509,13.71933,14.27165,13.76604,13.60386,17.15269,15.56908,15.91251,15.91251,16.41812,17.00959,16.3418,18.45965,19.4995,19.27284,20.01447,21.47847,21.55553,22.67279,20.0241,19.21505,20.85242,19.40768,20.13005,22.4609,21.89263,22.20429,24.57846,23.55679,25.09416,27.85753,30.05656,33.82214,36.64389,37.66556,33.88052,30.81551,32.92696,33.81291,38.51159,38.87454,39.39444,40.58137,43.45552,42.34706,35.91211,36.08868,39.44349,44.2697,48.90953,51.56777,57.81512,56.8183,60.97334,64.70397,63.66769,64.63489,61.58524,62.49323,73.16208,72.17513,66.57917,65.82126,70.34493,75.71181,72.83492,71.52544,82.52706,68.49975,49.48251,46.19889,46.86355,41.80419,45.16717,45.31],

    "Sony":[23.56179,25.47516,24.36358,26.60496,26.9124,24.44001,26.55527,30.42868,31.2345,35.08959,31.4484,28.28702,24.5191,28.69139,25.723,28.41568,31.28737,32.80366,33.01632,31.74965,34.06108,29.42899,26.3344,24.87396,24.54838,23.34841,20.41823,17.67409,19.67321,16.93379,16.92441,17.09328,20.06724,19.48558,15.35464,12.54136,13.4886,11.50888,10.7132,11.08262,11.25875,9.340731,10.74088,14.32757,13.98233,16.68673,15.89651,19.49572,20.50196,20.35683,19.31189,20.82124,16.7893,17.81126,16.82823,15.32936,17.08128,18.60936,17.28432,15.85376,16.43186,18.0584,18.72468,17.67626,19.42037,21.54661,20.05726,22.8204,27.74898,26.24004,29.62047,30.29656,27.81757,27.77838,25.33858,24.89766,27.9176,25.47973,24.19198,23.47438,20.76126,25.28312,23.77472,27.48397,28.95386,32.95906,31.72593,32.76176,30.98852,28.75315,27.72449,29.94008,30.62255,33.36236,34.23993,36.32288,37.88015,40.73678,39.30846,37.03705,43.1893,46.56207,44.72147,47.69627,50.20346,48.09424,45.72839,46.98559,51.14635,53.90023,56.704,60.51553,54.13,52.82,48.28,50.12,47.99,42.24,47.86],

    "Ubisoft":[17.345,11.985,12.42,12.94,10.75,10.145,9.92,9.889,8.974,10.18,9.627,7.724,6.191,7.266,6.824,8.166,9.349,7.37,8,8.571,8.024,7.209,6.778,6.902,6.913,5.826,4.982,4.082,4.364,5.374,5.171,5.98,6.394,5.533,5.199,5.415,5.274,5.62,6.01,6.207,7.169,7.712,7.9,7.11,8.39,8.43,8.47,10.12,10.06,11.47,11.43,11.43,9.48,9.69,10.28,10.37,11.87,13,13.43,14.655,13.45,12.525,12.63,13,14.43,14.055,15.165,17.89,16.415,17.205,16.435,16.44,15.98,17.69,16.65,18.11,27.275,26.5,26.67,25.345,26.37,27.6,25.37,33.15,33.01,36.725,35.04,33.6,31,32.835,33.8,30.42,34.625,40.045,43.5,49.53,49.68,53.43,55.96,58.16,65.5,64.43,64.14,68.94,68,68.52,79.26,92.62,93.98,94.44,92.66,93.42,79.5,71.94,70.48,77.5,63.5,79.36,80.2],

    "Microsoft":[18.71681,18.51996,19.40974,20.36614,21.95774,23.28804,24.24198,22.4127,22.80242,23.40447,24.40329,20.61575,18.46934,20.7168,18.83857,19.76214,21.52128,20.38349,22.66029,22.51414,21.58045,20.73612,21.16898,20.42578,21.3735,22.52438,21.86674,20.59016,22.02957,21.16095,21.63702,24.61253,26.45451,27.06493,26.86358,24.48932,25.83226,24.88645,26.02649,25.29784,24.26076,22.62865,22.89172,23.52594,23.82591,24.72312,28.60313,30.15858,30.05679,27.70724,29.06475,29.1644,31.031,33.41463,33.0323,33.41197,33.82698,36.46477,35.9399,36.42029,37.35808,38.66608,40.69971,41.79228,42.32415,43.09942,42.13752,36.64921,39.7789,37.14756,44.43821,42.81197,40.59822,42.94308,40.0189,40.96775,48.72442,50.30722,51.69931,51.33588,47.41277,51.83587,46.80526,49.74291,48.36128,53.56883,54.30602,54.77763,56.98396,57.30729,59.49439,61.89753,61.25606,63.43828,65.94269,67.27194,66.77598,70.42816,72.43347,72.54672,81.01001,81.97418,83.72681,92.99608,91.78236,89.75501,91.96766,97.19936,97.39349,104.7713,110.9442,113.3938,105.8983,109.9435,101.1381,103.9859,111.5536,117.94,123.37],

    "Bandai":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24.0613,23.4,23.4,23.4,23.4,37.66,42.15,43.58,44.67,43.56,43.91],

    "Take":[9.47,9.52,10.5,11.21,10.97,11.25,10.05,9.28,9.62,9.87,10.85,11.57,9,10.25,8.3,10.14,10.67,11.07,12.27,12.48,16.07,15.37,16.18,16.39,15.28,13.49,13.22,12.72,15.78,13.95,13.55,15.6,15.45,15.39,14.11,11.52,9.46,8.78,10.25,10.44,11.15,12.37,11.01,12.17,14.64,16.15,15.26,16.64,14.97,17.55,18.36,18.17,17.91,16.36,17.37,19.18,19.77,21.93,20.38,20.63,22.24,22.38,23.51,23.07,26.45,27.66,28.03,29.72,26.49,25.46,23.7,27.37,27.57,31.58,29.13,28.73,33.2,35.37,34.84,34.7,35.99,37.67,34.18,38.91,37.92,40.18,43.47,45.08,44.39,49.23,49.29,53.65,56.98,59.27,62.85,76.74,73.38,79.48,97.79,102.23,110.65,111.55,109.78,126.67,111.87,97.78,99.71,112.08,118.36,113.02,133.56,137.99,128.87,109.67,102.94,105.55,87.26,94.37,90.74]
}


 $(document).ready(function (){
    //---------------------------DECLARE linechart and barchart 
    var options;
    var barchart;  
    var options = {
        animationEnabled: true,  
        
        title:{
            text: "Stock Price"
        },
        
        axisX: {
            valueFormatString: "MMM"
        },
       
        axisY: {
            title: "$USD/stock",
            prefix: "$",
            includeZero: false
        },
        
        data: [
        //{
        //     yValueFormatString: "$#,###",
        //     xValueFormatString: "MMMM",
        //     type: "spline",
        //     dataPoints: chartData,
        // }
        ]
    };
 
   
    //------------------------  LINE CHART FUNCTION STARTS HERE  
    var makeChart = function(year,company){
        var companyName = company;
        var start = 0;
        var end = 0;
        if (year == 2009){
            start = 0;
            end = 7;
        } else if (year == 2010){
            start = 8;
            end = 19;
        } else if (year == 2011){
            start = 20;
            end = 31;
        } else if (year == 2012){
            start = 32;
            end = 43;
        } else if (year == 2013){
            start = 44;
            end = 55;
        } else if (year == 2014){
            start = 56;
            end = 67;
        } else if (year == 2015){
            start = 68;
            end = 79;
        } else if (year == 2016){
            start = 80;
            end = 91;
        } else if (year == 2017){
            start = 92;
            end = 103;
        } else if (year == 2018){
            start = 104;
            end = 115;
        } else {
            start = 116;
            end = 120;
        }

        
        if (company == 'Nintendo') {
            companyName = content.Nintendo; 
         } else if (company == 'Activision') {
            companyName = content.Activision;
         } else if (company == 'Activision') {
            companyName = content.Activision;
         } else if (company == 'Sony') {
            companyName = content.Sony;
         } else if (company == 'Ubisoft') {
            companyName = content.Ubisoft;
         } else if (company == 'Microsoft') {
            companyName = content.Microsoft;
         } else if (company == 'Bandai') {
            companyName = content.Bandai;
         } else if (company == 'Take') {
            companyName = content.Take;
         } else if (company == 'Electronic') {
            companyName = content.Electronic; 
         } else {
             console.log("Niceeeeeee");
         }
        
        //STORE IN AN ARRAY 
        var chartData = [];  
        
        //MAKE A LOOP TO STORE ALL THE MAP 
        for (i=start-1;i<end;i++){
            chartData.push({x:new Date(content.Year[i], content.Month[i], content.Date[i]), y: companyName[i]});

            // chartData1.push({x:new Date(content.Year[i], content.Month[i], content.Date[i]), y: content.Ubisoft[i]});

            // chartData2.push({x:new Date(content.Year[i], content.Month[i], content.Date[i]), y: content.Microsoft[i]});
        }
        var newdata = {
            yValueFormatString: "$#,###",
            xValueFormatString: "MMM, YYYY",
            type: "spline",
            name: company,
            showInLegend: true,
		    markerType: "square",
            dataPoints: chartData}

       
        
        
        options.data.push(newdata);

        $("#chartContainer").CanvasJSChart(options);
       
    };
    //------------------------  LINE CHART FUNCTION ENDS HERE  


    //------------------------  LINE CHART BUTTON STARTS HERE  
    $("#button_line").click(function() {
        //myMessage("Great! Let's go")
        $("#chartContainer").html('');
        $("#barChart").html('');

       if ($("#year").val() > 2019 || $("#year").val() < 2009){
            alert("Please choose the year between 2009 and 2019!")
        } else {
            var year = $("#year").val();
            var company;
        
            $("#message").html("You asked for data of year "+year+" of company "+company);
            
            //makeChart(year,company);
            
            if($("#Nintendo").is(':checked')){
                company = "Nintendo";
                makeChart(year, company); 
            }
            
            if($("#Electronic").is(':checked')){
                company = "Electronic";
                $("#chartContainer").html("");
                makeChart(year, company); 
            } 

            if($("#Activision").is(':checked')){
                company = "Activision";
                $("#chartContainer").html("");
                makeChart(year, company); 
            }

            if($("#Sony").is(':checked')){
                company = "Sony";
                $("#chartContainer").html("");
                makeChart(year, company); 
            }

            if($("#Ubisoft").is(':checked')){
                company = "Ubisoft";
                $("#chartContainer").html("");
                makeChart(year, company); 
            }

            if($("#Microsoft").is(':checked')){
                company = "Microsoft";
                $("#chartContainer").html("");
                makeChart(year, company); 
            }

            if($("#Bandai").is(':checked')){
                company = "Bandai";
                $("#chartContainer").html("");
                makeChart(year, company); 
            }

            if($("#Take").is(':checked')){
                company = "Take";
                $("#chartContainer").html("");
                makeChart(year, company); 
            } 

        }
        
        $("#barChart").html('');   
    });
    //------------------------  LINE CHART BUTTON ENDS HERE  
    

    //------------------------  REFRESH BUTTON STARTS HERE  
    $("#button_refresh").click(function() {
        $("#chartContainer").html('');
        $("#barChart").html('');
    });
     //------------------------  REFRESH BUTTON ENDS HERE  
   


    //-----------------------------------//
});